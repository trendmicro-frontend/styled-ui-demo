(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{29510:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return useLatestRef_page}});var r=n(52322),o=n(45392),a=n(20947),c=n(49857),l=n(55459),i=n(68010),s=n(20526),u=n(2784);function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],c=!0,l=!1;try{for(o=o.call(e);!(c=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{c||null==o.return||o.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var hooks_useLatestRef=function(){var e=_slicedToArray((0,u.useState)(!1),2),t=e[0],n=e[1],r=(0,u.useRef)(null),o=_slicedToArray((0,u.useState)(0),2),a=o[0],d=o[1],f=(0,s.Z)(a);return u.createElement(u.Fragment,null,u.createElement(c.Z,{mb:"4x"},"You clicked ",a," times"),u.createElement(l.Z,{disabled:t,onClick:function(){r.current&&(clearTimeout(r.current),r.current=null),r.current=setTimeout(function(){alert("Latest count value: ".concat(f.current)),r.current=null,n(!1)},3e3),n(!0)}},"Show Alert In 5 Seconds"),u.createElement(i.Z,{width:"2x"}),u.createElement(l.Z,{disabled:!t,onClick:function(){return d(a+1)}},"Click Me"))};function _createMdxContent(e){var t=Object.assign({div:"div",h1:"h1",p:"p",h2:"h2",a:"a",svg:"svg",use:"use",pre:"pre",code:"code",h3:"h3",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,o.ah)(),e.components);return(0,r.jsxs)(t.div,{className:"main-content",id:"main-content",children:["\n","\n",(0,r.jsx)(t.h1,{id:"uselatestref",children:"useLatestRef"}),"\n",(0,r.jsx)(t.p,{children:"A custom Hook that returns a ref object with the latest value."}),"\n",(0,r.jsx)(t.p,{children:"This is mostly useful to get access to the latest value of some props or state inside an asynchronous callback, instead of that value at the time the callback was created from."}),"\n",(0,r.jsxs)(t.h2,{id:"import",children:["Import",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#import",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"import { useLatestRef } from '@tonic-ui/react-hooks';\n"})}),"\n",(0,r.jsxs)(t.h2,{id:"usage",children:["Usage",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#usage",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const ref = useLatestRef(value);\n"})}),"\n",(0,r.jsxs)(t.h3,{id:"parameters",children:["Parameters",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#parameters",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{align:"left",children:"Name"}),(0,r.jsx)(t.th,{align:"left",children:"Type"}),(0,r.jsx)(t.th,{align:"left",children:"Default"}),(0,r.jsx)(t.th,{align:"left",children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{align:"left",children:"value"}),(0,r.jsx)(t.td,{align:"left",children:"any"}),(0,r.jsx)(t.td,{align:"left"}),(0,r.jsx)(t.td,{align:"left",children:"The latest value."})]})})]}),"\n",(0,r.jsxs)(t.h3,{id:"returns",children:["Returns",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#returns",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsxs)(t.p,{children:["Returns a ref object with the ",(0,r.jsx)(t.code,{children:"current"})," property set to the latest value."]}),"\n",(0,r.jsxs)(t.h2,{id:"demos",children:["Demos",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#demos",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsx)(a.Z,Object.assign({},{component:hooks_useLatestRef,file:{data:"import { Box, Button, Space } from '@tonic-ui/react';\nimport { useLatestRef } from '@tonic-ui/react-hooks';\nimport React, { useRef, useState } from 'react';\n\nconst App = () => {\n  const [countdownMode, setCountdownMode] = useState(false);\n  const timeoutRef = useRef(null);\n  const [count, setCount] = useState(0);\n  const latestRef = useLatestRef(count);\n\n  function handleAlertClick() {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n    timeoutRef.current = setTimeout(() => {\n      alert(`Latest count value: ${latestRef.current}`);\n      timeoutRef.current = null;\n      setCountdownMode(false);\n    }, 3000);\n    setCountdownMode(true);\n  }\n\n  return (\n    <>\n      <Box mb=\"4x\">\n        You clicked {count} times\n      </Box>\n      <Button disabled={countdownMode} onClick={handleAlertClick}>\n        Show Alert In 5 Seconds\n      </Button>\n      <Space width=\"2x\" />\n      <Button disabled={!countdownMode} onClick={() => setCount(count + 1)}>\n        Click Me\n      </Button>\n    </>\n  );\n};\n\nexport default App;",path:"pages/hooks/useLatestRef.page.mdx"},sandbox:{files:{},raw:"import { Box, Button, Space } from '@tonic-ui/react';\nimport { useLatestRef } from '@tonic-ui/react-hooks';\nimport React, { useRef, useState } from 'react';\n\nconst App = () => {\n  const [countdownMode, setCountdownMode] = useState(false);\n  const timeoutRef = useRef(null);\n  const [count, setCount] = useState(0);\n  const latestRef = useLatestRef(count);\n\n  function handleAlertClick() {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n    timeoutRef.current = setTimeout(() => {\n      alert(`Latest count value: ${latestRef.current}`);\n      timeoutRef.current = null;\n      setCountdownMode(false);\n    }, 3000);\n    setCountdownMode(true);\n  }\n\n  return (\n    <>\n      <Box mb=\"4x\">\n        You clicked {count} times\n      </Box>\n      <Button disabled={countdownMode} onClick={handleAlertClick}>\n        Show Alert In 5 Seconds\n      </Button>\n      <Space width=\"2x\" />\n      <Button disabled={!countdownMode} onClick={() => setCount(count + 1)}>\n        Click Me\n      </Button>\n    </>\n  );\n};\n\nexport default App;",title:"Tonic UI"}}))]})}var useLatestRef_page=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(0,o.ah)(),e.components).wrapper;return t?(0,r.jsx)(t,Object.assign({},e,{children:(0,r.jsx)(_createMdxContent,e)})):_createMdxContent(e)}},20947:function(e,t,n){"use strict";var r=n(40596),o=n(49857),a=n(73645),c=n(82139),l=n(62368),i=n(62272),s=n(14594),u=n(65019),d=n(5632),f=n(2784),h=n(65245),m=n(82821),p=n(5198),x=n(90622),y=n(52057),b=n(63651),k=n(94981),j=["component","defaultExpanded","expanded","file","sandbox"];function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],c=!0,l=!1;try{for(o=o.call(e);!(c=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{c||null==o.return||o.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Demo=function(e){var t=e.component,n=e.defaultExpanded,g=void 0!==n&&n,v=e.expanded,C=e.file,R=e.sandbox;!function(e,t){if(null!=e){var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}}(e,j);var E=(0,d.useRouter)(),w=_slicedToArray((0,f.useReducer)(function(e){return!e},!1),2),A=w[0],_=w[1],S=_slicedToArray((0,r.Z)(),1)[0],Z={dark:x.y,light:x.q}[S],T=_slicedToArray((0,u.Z)(null!=v?v:g),2),L=T[0],B=T[1],M=(0,m.Z)(null==C?void 0:C.data),O=M.onCopy,I=M.hasCopied,N=(0,f.useCallback)(function(){O()},[O]),H=(0,f.useCallback)(function(){(0,y.b)(R)},[R]),D=(0,f.useCallback)(function(){_(),B(!1)},[_,B]);return(0,f.useEffect)(function(){void 0!==v&&v!==L&&B(v)},[v,L,B]),f.createElement(h.nu,{code:null==C?void 0:C.data,disabled:!0,language:"jsx",theme:Z},f.createElement(o.Z,{border:1,borderColor:{dark:"gray:70",light:"gray:30"}[S],p:"4x"},f.createElement(o.Z,{fontSize:"sm",lineHeight:"sm"},f.createElement(f.Fragment,{key:A},f.createElement(t,null)))),f.createElement(a.Z,{columnGap:"2x",justifyContent:"flex-end",mb:"4x"},f.createElement(k.Z,{"data-track":L?"CodeBlock|hide_source|".concat((0,b.Z)({path:E.pathname})):"CodeBlock|show_source|".concat((0,b.Z)({path:E.pathname})),onClick:B},f.createElement(c.Z,{label:L?"Hide the source":"Show the source"},f.createElement(l.Z,{icon:"code"}))),f.createElement(k.Z,{"data-track":"CodeBlock|copy_source|".concat((0,b.Z)({path:E.pathname})),onClick:N},f.createElement(c.Z,{label:I?"Copied":"Copy the source"},f.createElement(l.Z,{icon:"file-copy-o"}))),f.createElement(k.Z,{"data-track":"CodeBlock|edit_in_codesandbox|".concat(E.pathname),onClick:H},f.createElement(c.Z,{label:"Edit in CodeSandbox"},f.createElement(p.Z,null))),f.createElement(k.Z,{"data-track":"CodeBlock|reset|".concat(E.pathname),onClick:D},f.createElement(c.Z,{label:"Reset the demo"},f.createElement(l.Z,{icon:"redo"})))),f.createElement(i.Z,{in:L},f.createElement(s.Z,{in:L,unmountOnExit:!0},f.createElement(o.Z,{as:h.uz,sx:{fontFamily:"mono",fontSize:"sm","& > .prism-code":{overflowX:"auto"}}}))))};Demo.displayName="Demo",t.Z=Demo},59301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hooks/useLatestRef",function(){return n(29510)}])}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=59301)}),_N_E=e.O()}]);